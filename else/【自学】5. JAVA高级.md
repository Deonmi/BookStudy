#  尚学堂JAVA高级学习笔记

[TOC]

## 写在前面

学习链接：[Java 视频教程全集](https://www.bilibili.com/video/av59529105/)

课件链接：[Java课件](https://www.sxt.cn/Java_jQuery_in_action/History_Direction.html)

## 第1章 手写webserver

### 1. 反射

- 反射Reflection：把java类中的各种结构（方法、属性、构造器、类名）映射成一个个的java对象。利用反射技术可以对一个类进行解剖，反射是框架设计的灵魂。

- 获取Class对象（三种方式）：推荐使用Class.forName(“完整路径”)

- 可以动态创建对象：clz.getConstructor().newInstance()

- 练习

  ```java
  package com.sxt.Server_study01;
  
  import java.lang.reflect.InvocationTargetException;
  
  /**
   * @author: Li Tian
   * @contact: litian_cup@163.com
   * @software: IntelliJ IDEA
   * @file: ReflectTest.java
   * @time: 2019/11/29 14:55
   * @desc:
   */
  
  public class ReflectTest {
      public static void main(String[] args){
          // 1. 对象.getClass() | 买iphone照着做
          Iphone iphone = new Iphone();
          Class clz = iphone.getClass();
          // 2. 类.class()     | 买通工程师给图纸
          clz = Iphone.class;
          // 3. Class.forName("包名.类名")   | 偷图纸
          try {
              clz = Class.forName("com.sxt.Server_study01.Iphone");
          } catch (ClassNotFoundException e) {
              e.printStackTrace();
          }
  
          // 创建对象
          try {
              Iphone iphone2 = (Iphone)clz.newInstance();
              System.out.println(iphone2);
          } catch (InstantiationException | IllegalAccessException e) {
              e.printStackTrace();
          }
          // 创建对象推荐方式
          try {
              Iphone iphone3 = (Iphone)clz.getConstructor().newInstance();
              System.out.println(iphone3);
          } catch (InstantiationException | IllegalAccessException | InvocationTargetException | NoSuchMethodException e) {
              e.printStackTrace();
          }
      }
  }
  
  class Iphone{
      public Iphone(){
      }
  }
  ```

### 2. 高效解析xml

- XML：Extensible Markup Language，可扩展标记语言，作为数据的一种存储格式或用于存储软件的参数，程序解析此配置文件，就可以达到不修改代码就能更改程序的目的。

- 利用Sax解析XML

- xml例子

  ```java
  <?xml version="1.0" encoding="UTF-8"?>
  <persons>
      <person>
          <name>至尊宝</name>
          <age>9000</age>
      </person>
      <person>
          <name>白晶晶</name>
          <age>7000</age>
      </person>
  </persons>
  ```

- 制作Person类

  ```java
  package com.sxt.Server_study01;
  
  /**
   * @author: Li Tian
   * @contact: litian_cup@163.com
   * @software: IntelliJ IDEA
   * @file: Person.java
   * @time: 2019/11/29 15:29
   * @desc:
   */
  
  public class Person {
      private String name;
      private int age;
  
      public Person() {
      }
  
      public Person(String name, int age) {
          this.name = name;
          this.age = age;
      }
  
      public String getName() {
          return name;
      }
  
      public void setName(String name) {
          this.name = name;
      }
  
      public int getAge() {
          return age;
      }
  
      public void setAge(int age) {
          this.age = age;
      }
  }
  ```

- 熟悉sax解析流程

  ```java
  package com.sxt.Server_study01;
  
  import org.xml.sax.Attributes;
  import org.xml.sax.SAXException;
  import org.xml.sax.helpers.DefaultHandler;
  
  import javax.xml.parsers.ParserConfigurationException;
  import javax.xml.parsers.SAXParser;
  import javax.xml.parsers.SAXParserFactory;
  import java.io.IOException;
  
  /**
   * @author: Li Tian
   * @contact: litian_cup@163.com
   * @software: IntelliJ IDEA
   * @file: XmlTest01.java
   * @time: 2019/11/29 15:10
   * @desc: 熟悉sax解析流程
   */
  
  public class XmlTest01 {
      public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException {
          // SAX解析
          // 1. 获取解析工厂
          SAXParserFactory factory = SAXParserFactory.newInstance();
          // 2. 从解析工厂获取解析器
          SAXParser parse = null;
          parse = factory.newSAXParser();
          // 3. 加载文档Document注册处理器
          // 4. 编写处理器
          PHandler handler = new PHandler();
          parse.parse(Thread.currentThread().getContextClassLoader().getResourceAsStream("com/sxt/Server_study01/p.xml"), handler);
      }
  }
  
  class PHandler extends DefaultHandler {
      @Override
      public void startDocument() throws SAXException {
          System.out.println("解析文档开始");
      }
  
      @Override
      public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
          System.out.println(qName + "-->解析开始");
      }
  
      @Override
      public void characters(char[] ch, int start, int length) throws SAXException {
          String contents = new String(ch, start, length).trim();
          if(contents.length()>0) {
              System.out.println("内容为：" + contents);
          }else{
              System.out.println("内容为空！");
          }
      }
  
      @Override
      public void endDocument() throws SAXException {
          System.out.println("解析文档结束");
      }
  
      @Override
      public void endElement(String uri, String localName, String qName) throws SAXException {
          System.out.println(qName + "-->解析结束");
      }
  }
  ```

- 获取xml中的内容

  ```java
  package com.sxt.Server_study01;
  
  import org.xml.sax.Attributes;
  import org.xml.sax.SAXException;
  import org.xml.sax.helpers.DefaultHandler;
  
  import javax.xml.parsers.ParserConfigurationException;
  import javax.xml.parsers.SAXParser;
  import javax.xml.parsers.SAXParserFactory;
  import java.io.IOException;
  import java.util.ArrayList;
  import java.util.List;
  
  /**
   * @author: Li Tian
   * @contact: litian_cup@163.com
   * @software: IntelliJ IDEA
   * @file: XmlTest02.java
   * @time: 2019/11/29 15:31
   * @desc: 获取xml中的内容
   */
  
  public class XmlTest02 {
      public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException {
          // SAX解析
          // 1. 获取解析工厂
          SAXParserFactory factory = SAXParserFactory.newInstance();
          // 2. 从解析工厂获取解析器
          SAXParser parse = null;
          parse = factory.newSAXParser();
          // 3. 加载文档Document注册处理器
          // 4. 编写处理器
          PersonHandler handler = new PersonHandler();
          parse.parse(Thread.currentThread().getContextClassLoader().getResourceAsStream("com/sxt/Server_study01/p.xml"), handler);
          // 5. 获取数据
          List<Person> persons = handler.getPersons();
          for (Person p : persons) {
              System.out.println(p.getName() + "-->" + p.getAge());
          }
      }
  }
  
  class PersonHandler extends DefaultHandler {
      private List<Person> persons;
      private Person person;
      private String tag;     // 存储操作的标签
  
      @Override
      public void startDocument() throws SAXException {
          System.out.println("解析文档开始");
          persons = new ArrayList<>();
      }
  
      @Override
      public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
          if (null != qName) {
              tag = qName;        // 存储标签名
              if (tag.equals("person")) {
                  person = new Person();
              }
          }
      }
  
      @Override
      public void characters(char[] ch, int start, int length) throws SAXException {
          String contents = new String(ch, start, length).trim();
          if (contents.length() > 0) {
              if (tag.equals("name")) {
                  person.setName(contents);
              } else if (tag.equals("age")) {
                  person.setAge(Integer.valueOf(contents));
              }
          }
      }
  
      @Override
      public void endElement(String uri, String localName, String qName) throws SAXException {
          if (qName.equals("person")) {
              persons.add(person);
          }
      }
  
      @Override
      public void endDocument() throws SAXException {
          System.out.println("解析文档结束");
      }
  
      public List<Person> getPersons() {
          return persons;
      }
  }
  ```

### 3. 解析webxml



------

我的CSDN：https://blog.csdn.net/qq_21579045

我的博客园：https://www.cnblogs.com/lyjun/

我的Github：https://github.com/TinyHandsome

纸上得来终觉浅，绝知此事要躬行~

欢迎大家过来OB~

by 李英俊小朋友